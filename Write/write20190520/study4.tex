\section{Study4:Predicting the mitigation of psychological stress in adolescents by positive events}
To quantify the restoring impact of uplift event,
in this section, we propose to model the impact as the teen's behavioral differences in two cases:
1) stressful intervals unaffected by uplift events (SI), and 2) stressful intervals impacted by uplift events (U-SI).
Multiple stress and positive emotion related measures are proposed to describe the correlation between SI and U-SI,
and we quantify such differences as correlations using a two-sample based statistical method.

\subsection{Restoring Patterns and Behavioral Measures}
\label{subsec:pattern}
To extract the restoring patterns of each type of uplift events,
we describe a teen's positive and stressful behavioral measures in SI and U-SI sets from three aspects:
posting behavior, stress intensity, and linguistic expressions.

\textbf{Posting behavior}.
Stress could lead to a teen's abnormal posting behaviors,
reflecting the teen's changes in social engagement activity.
For each stressful interval,
we consider three measures of posting behaviors in each time unit (day),
and present each measure as a corresponding series.
The first measure is \emph{posting frequency},
representing the total number of posts per day.
Research in \cite{Li2017Analyzing} indicates that overwhelmed teens usually tend to post more to express their stress for releasing
and seeking comfort from friends.
Further, the second measure \emph{stressful posting frequency} per day
is based on previous stress detection result and highlights the stressful posts among all posts.
Similarly, the third measure is the \emph{positive posting frequency}, indicating the number of positive posts per day.
The forth measure \emph{original frequency} is the number of original posts, which filters out re-tweet and shared posts.
Compared to forwarded posts, original posts indicate higher probability that teens are talking about themselves.
Thus for each day in current interval, the teen's posting behavior is represented as a four-dimension vector.

\textbf{Stress intensity}.
We describe the global stress intensity during a stressful interval through four measures:
\emph{sequential stress level, length, RMS,} and \emph{peak}.
Basically, \emph{stress level} per day constructs a sequential measure during a stressful interval,
recording stress values and fluctuation on each time point.
The \emph{length} measures the lasting time of current stressful interval.
As uplift events might conduct impact on overwhelmed teens,
and postpone the beginning or promote the end of the stressful interval,
we take the \emph{length} as a factor representing the interval stress intensity.
To quantify the intensity of fluctuations for stress values,
we adopt the \emph{RMS} (root mean square) of stress values through the interval as the third measure.
In addition, the \emph{peak} stress value is also a measure to show the maximal stress value in current interval.

\textbf{Linguistic expressions}.
We extract the teen's positive and stressful expressions from the content of posts in SI and U-SI sets, respectively.
The first linguistic measure is the frequency of \emph{positive word},
which represents the positive emotion in current interval.
The second measure is the frequency of \emph{uplift event topic words} in six dimensions,
reflecting the existence of uplift events.
Another important factor is wether existing \emph{self-mentioned words} (i.e., \emph{'I','we','my'}).
Self-mentioned words show high probability that the current stressor event and stressful emotion is related to the author,
rather than the opinion about a public event or life events about others.

Except uplift-related linguistic descriptions, we also take stressful linguistic characters as measures,
which is opposite with positive measures, while also offers information from the complementary perspective.
The first stressful linguistic measure is the frequency of \emph{stressor event topic words} in five dimensions,
which represents how many times the teen mentioned a stressor event,
indicating the degree of attention for each type of stressor event.
The frequency of \emph{pressure words} is the second stressful linguistic measure,
reflecting the degree of general stress emotion during the interval.
We adopt this measure specifically because in some cases teens post very short tweets with only stressful emotional words,
where topic-related words are omitted.

Next,
based on the posting behavior, stress intensity and linguistic measures from both the stressful and positive views,
we quantify the difference between SI and U-SI sets, thus to measure the impact of uplift events.

\subsection{Quantify the Correlation}
In our problem,
there are two sets of stressful intervals to compare:
the SI set and the U-SI set,
containing stressful intervals unaffected by uplift events
and stressful intervals impacted by uplift events, respectively.
The basic elements in each set are stressful intervals,
i.e., the sequential stress values in time line,
which are modeled as multi-dimensional points according to the three groups of measures in section \ref{subsec:pattern}.
Thus we formulate this comparison problem as finding the correlation between the two sets of multi-dimension points.
Specifically, we adopt the multivariate two-sample hypothesis testing method
\cite{Li2017Correlating,Johnson2012Applied} to model such correlation.
In this two-sample hypothesis test problem,
the basic idea is judging whether the multi-dimension points (i.e., stressful intervals)
in set SI and set U-SI are under different statistical distribution.
Assuming the data points in SI and U-SI are randomly sampled from distribution $F^{(1)}$ and $F^{(2)}$, respectively,
then the hypothesis is denoted as:
\begin{equation}
H_0: F^{(1)} =F^{(2)} \quad versus \quad H_1: F^{(1)} \neq F^{(2)}.
\end{equation}

Under such hypothesis,
$H_0$ indicates points in SI and U-SI are under similar distribution,
while $H_1$ means points in SI and U-SI are under statistically different distributions,
namely uplift events have conducted obvious restoring impact on current stressed teen.
Next, we handle this two-sample hypothesis test problem based on both positive and stressful behavioral measures
(i.e., \emph{posting behavior}, \emph{stress intensity} and \emph{linguisitc expressions}),
thus to quantify the restoring patterns of uplift events from multi perspectives.

As a classic statistical topic, various algorithms have been proposed to solve the two-sample hypothesis testing problem.
Since each point in the two sets (SI and U-SI) is depicted in multi-dimensions,
here we take the KNN (k nearest neighbors) \cite{Schilling1986Multivariate}
based method to judge the existence of significant difference between SI and U-SI.
For simplify, we use the symbol $A_1$ to represent set SI,
and $A_2$ represent set U-SI,
namely $A_1$ and $A_2$ are two sets composed of stressful intervals.
In the KNN algorithm,
for each point $\ell_{x}$ in the two sets $A_1$ and $A_2$,
we expect its nearest neighbors (\emph{the most similar points}) belonging to the same set of $\ell_x$,
which indicates the difference between the points in the two cases.

Following section~\ref{subsec:pattern},
for each teen, three groups of behavioral measures are considered: \emph{posting behavior},
\emph{stress intensity} and \emph{linguistic expressions},
indicated as \bm{${<D_p}$},\bm{${D_s}$},\bm{${D_l>}$}, respectively.
To measure the correlation for each group of positive and stressful behavioral measures,
the Euclidean distance is adopted to calculate the distance of structured points in $A_1$ and $A_2$.

For each point $\ell x \in A=A_1\bigcup A_2$,
let $NN_r(\ell_x,A)$ be the function to find the $r-$th nearest neighbor of $\ell_x$.
Specifically, according to the three group of measures,
three sub-functions of $NN_r(.)$ are defined as $PNN_r(.)$, $SNN_r(.)$ and $LNN_r(.)$,
corresponding to the teen's posting behaviors, stress intensity and linguistic expressions in each stressful interval,  respectively.

For point $\ell_x$ with posting behavior matrix \bm{${D_p^x}$}, stress intensity matrix \bm{${D_s^x}$},
and linguistic expression matrix \bm{${D_l^x}$},
the $r$-th nearest neighbor of $\ell_x$ in each measure is denoted as:
\begin{equation}
\begin{aligned}
& PNN_r(\ell_x,A)
= \{y | min\{||\textbf{D}_p^x-\textbf{D}_p^y ||_2\}, y\in(A/\ell_x)\} &\\
& SNN_r(\ell_x,A)
= \{z | min\{||\textbf{D}_s^x-\textbf{D}_s^z ||_2\}, z\in(A/\ell_x)\} \\
& LNN_r(\ell_x,A)
= \{w | min\{||\textbf{D}_l^x-\textbf{D}_l^w ||_2\}, w\in(A/\ell_x)\} &
 \end{aligned}
 \end{equation}
The $r$-th nearest neighbor considering all three groups of measures is denoted as:
\begin{align}
&NN_r(\ell_x,A) = \{v | min\{a \times ||\textbf{D}_p^x-\textbf{D}_p^v||_2+\\
&b \times ||\textbf{D}_s^x-\textbf{D}_s^v||_2+
c \times ||\textbf{D}_l^x-\textbf{D}_l^v||_2\}, v\in(A/\ell_x) \}
\end{align}
In this study, we set $a = b = c = 1/3$.
Next, let $I_r(\ell_x,A1,A2)$ be the function denoting whether the $r$-th nearest neighbor is in the same set with $\ell_x$:
\begin{equation}
I_r(\ell_x,A_1,A_2) =
\left\{ \begin{array}{ll}
1, \quad if \ell_x \in A_i  \&\& NN_r(\ell_x,A)\in A_i,\\
0, \quad otherwise
\end{array}
\right.
\end{equation}
Let $T_{r,n}$ denote the proportion that pairs containing two points from the same set among all pairs formed by $\ell_x \in A$
and its $k$ nearest neighbors:
\begin{equation}
T_{k,n}= \frac{1}{n\times k}\sum_{i=1}^{n}\sum_{j=1}^{k}I_j(x,A_1,A_2)
\end{equation}
The value of $T_{k,n}$ shows how differently the points in the two testing sets (SI and U-SI) perform in three groups of measures.
If the value of $T_{r,n}$ is close to $1$,
it can be shown that the two underlying distributions $F^{(1)}$ and $F^{(2)}$ for $SI$ and U-SI are significantly different,
indicating current uplift events conduct obvious restoring impact on the teens' stress series.
Let $\lambda_1=|A_1|$ and $\lambda_2=|A_2|$, the statistic value $Z$ is denoted as:
\begin{align}
&Z=(nr)^{1/2}(T_{r,n}-\mu_{r})/\sigma_{r}\\
&\mu_r=(\lambda_1)^2+(\lambda_2)^2\\
&{\sigma_r}^2=\lambda_1\lambda_2+4{\lambda_1}^2{\lambda_2}^2
\end{align}
where $\mu_r$ is the expectation and ${\sigma_r}^2$ is the variance of $Z$.
Based on hypothesis test theory \cite{Johnson2012Applied},
when the size of the testing set ($\lambda_1$ and $\lambda_2$) are large enough,
$Z$ obeys a standard Gaussian distribution.

Thus we judge whether the uplift events have conducted significant restoring impact on the teen's stress series as follows:
if $f(SI,USI)=(nr)^{1/2}(T_{r,n}-\mu_{r})/{\mu_r}^2>\alpha$ ($\alpha = 1.96$ for $P=0.025$),
then the hypothesis $H_1$ is true.

\subsection{Temporal Order}
\label{sec:temporal}
To measure the intensity of stress changes in the two sets (SI and U-SI) of intervals,
for each stressful interval,
we further quantify its stress intensity by comparing with the front and rear adjacent intervals, respectively.
For a stressful interval $I = <t_i,t_{i+1},\cdots,t_j>$,
let $I^{front} = <t_m,\cdots,t_{i-1}>$ be the adjacent interval before $I$,
and $I^{rear} = <t_{j+1},\cdots,t_n>$ be the rear adjacent interval of $I$.
The length of $I^{front}$ and $I^{rear}$ are set to $|I|$.
For the set of stressful intervals $SI$ composed of $<I_1,I_2,\cdots,I_N>$,
the corresponding sets of adjacent front and rear intervals are denoted as $SI^{front}$ and $SI^{rear}$.
Similarly, for the set of stressful intervals $U-SI$ = $<UI_1,UI_2,\cdots, UI_M>$ impacted by uplift events,
the corresponding sets of adjacent front and rear intervals are denoted as $USI^{front}$ and $USI^{rear}$.
We compare the intensity of stress changes in following four situations,
where $g(.)$ is the function comparing two sets.

\begin{itemize}
\item[\textcircled{1}] $g(SI,SI^{front}$) returns if intensive change happens when stressful intervals begin.
\item[\textcircled{2}] $g(SI,SI^{rear}$) returns if the teen's stress change intensively after the stressful intervals end.
\item[\textcircled{3}] $g(USI,USI^{front}$) returns if intensive change happens when stressful intervals affected by uplift events appears.
\item[\textcircled{4}] $g(USI,USI^{rear}$) returns if stress change intensively after stressful intervals affected by uplift events end.
\end{itemize}

In our problem, taking the comparison between $SI$ and $SI^{rear}$ for example,
the basic computation element $I_k \in SI \cup SI^{rear}$ in both sets is a multi-dimension interval.
Here we adopt the t-test method as the intensity computation function $g(.)$.
The t-test algorithm measures if intensive positive or negative monotonous correlation
exists between two sample sets.
The function $g(.) = t_{score}$ $\in$ (-1,1) is represented as:

\begin{equation}
\small{g(SI,SI^{rear})}= \frac{\mu_{SI}-\mu_{SI^{rear}}}{\sqrt{\frac{(n_1-1)\sigma^2_{SI}+(n_2-1)\sigma^2_{SI^{rear}}}{n_1+n_2-2}(\frac{1}{n_1}-\frac{1}{n_2})}}
\end{equation}
where $\mu_{SI}$ and $\mu_{SI^{rear}}$ are the mean stress values of intervals in sets $SI$ and $SI^{rear}$,
and $\sigma_{SI}$ and $\sigma_{SI^{rear}}$ are the variance stress values of intervals in sets $SI$ and $SI^{rear}$, respectively.
If $g(SI,SI^{rear})$ $> \alpha$, stress intensity in $SI^{rear}$ show significant decrease compared with $SI$ (monotonic negative effect).
If $g(SI^{front},SI)$ $< -\alpha$, stress intensity in $SI$ show significant increase compared with $SI^{front}$ (monotonic positive effect).
Here we adopt $\alpha$ = 1.96, $P$ = 0.025.
We conduct comparison for above four situations,
to observe whether the occurrence of uplift events relieve the monotonic negative effect of $g(SI,SI^{rear})$
and the monotonic positive effect of $g(SI^{front},SI)$.
{ \footnotesize%\small
\begin{algorithm}
  \caption{Identify the restoring impact of uplift events.}
  %with type $U'$ on stressor event with type $S'$.}
  \label{alg:quantify}
  \KwIn{
  SI: Set of stressful intervals caused by $S'$; \\
  \quad \quad \quad \, U-SI: Set of stressful intervals affected by $U'$;}
  \KwOut{Restoring impact of uplift $U'$ on stressor $S'$: \bm{${A}$}}
  \textbf{Initialize:}  $H_1, H^{front}, H^{rear} = false$;\\
  \If{$f(SI,USI) >$ $\alpha$} {$H_1 = ture$;}
  \If{   $g(SI,SI^{rear}$) $> \alpha$ \&\& $g(SI,SI^{rear}$) $> g(USI, USI^{rear}$)}
  {
  	$H^{rear} = true;$
  }
  \If{$g(SI^{front},SI)$ $< -\alpha$ \&\&  $g(SI,SI^{front}$) $< g(USI, USI^{front}$)}
  {
  	$H^{front} = true;$
  }
  \Return \bm{${A}$} = $<H_1, H^{front}, H^{rear}>$;
\end{algorithm}
}

\subsection{Overall Algorithm}
The overall pipeline for identifying the restoring impact of uplift events is presented in algorithm \ref{alg:quantify}.
For an uplift event $u$ with type $U'$,
a stressor event $e$ with type $S'$,
the overall algorithm is represented as
$F: (u, U', e, S')$ $\rightarrow$ \bm{${A}$}.%, where \bm{${A}$} = $<f(.), g^{(front)}(.), g^{(rear)}(.)>$.
To quantify the restoring impact of uplift events,
we first extract uplift events and stressful intervals from the teen's microblogs.
All stressful intervals are classified into two sets:
the set of stressful intervals affected by uplift events (SI),
and the set of stressful intervals impacted by uplift events (U-SI).
To judge if SI are statistically different with U-SI,
next, the two-sample hypothesis testing method is conducted on the two sets
with multi positive and stressful measures (posting behavior, stress intensity and linguistic expressions).
To further judge the monotonous restoring intensity of each type of uplift events,
the final step comes to comparing SI and U-SI with adjacent intervals, respect to temporal order.
